<div>
    <h2>Crear Usuario</h2>
    <!-- Formulario que utiliza FormGroup (Reactive Forms) de Angular -->
    <form [formGroup]="usuarioForm" (ngSubmit)="submitForm()">
        <!-- El formGroup 'usuarioForm' está enlazado con el formulario. Cuando se envía el formulario, se ejecuta la función 'submitForm()' -->

        <div>
            <label for="username">Nombre:</label>

            <!-- Input que utiliza 'formControlName' para enlazar el campo 'username' del formulario reactivo -->
            <input id="username" formControlName="username" type="text" />

            <!-- Validación: si el campo es inválido y ha sido tocado, se muestra un mensaje de error -->
            <div *ngIf="usuarioForm.get('username')?.invalid && usuarioForm.get('username')?.touched">
                Nombre es requerido
            </div>
        </div>

        <div>
            <label for="mail">mail:</label>
            <input id="mail" formControlName="mail" type="email" />

            <!-- Validación: si el campo es inválido (por ejemplo, un formato de email incorrecto) y ha sido tocado, se muestra un mensaje de error -->
            <div *ngIf="usuarioForm.get('mail')?.invalid && usuarioForm.get('mail')?.touched">
                Ingresa un email válido
            </div>
        </div>

        <div>
            <label for="password">password:</label>
            <input id="password" formControlName="password" type="password" />

            <!-- Validación: si la clave es inválida (por ejemplo, si tiene menos de 6 caracteres) y el campo ha sido tocado, se muestra un mensaje de error -->
            <div *ngIf="usuarioForm.get('password')?.invalid && usuarioForm.get('password')?.touched">
                La clave debe tener al menos 6 caracteres
            </div>
        </div>

        <!-- Botón para enviar el formulario -->
        <!-- Se deshabilita el botón si el formulario es inválido (por ejemplo, si no se han completado los campos obligatorios) -->
        <button type="submit" [disabled]="usuarioForm.invalid">Enviar</button>
    </form>

    <h2>Usuarios Registrados</h2>
    <table>
        <thead>
            <tr>
                <th>userId</th>
                <th>Nombre</th>
                <th>mail</th>
                <th>password</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let usuario of usuarios">
                <td>{{ usuario.userId }}</td>
                <td>{{ usuario.username }}</td>
                <td>{{ usuario.mail }}</td>
                <td>{{ usuario.password }}</td>
                <td>

                    <!-- Botón para borrar el usuario -->
                    <button (click)="editarUsuario(usuario)">Modificar</button>
                    <button (click)="bajaUsuario(usuario.userId)">Borrar</button>
                </td>
            </tr>
        </tbody>
    </table>

    <!-- Formulario para modificar usuario, solo visible si se seleccionó un usuario para editar -->
    <form *ngIf="usuarioSeleccionado" [formGroup]="modificarUsuarioForm" (ngSubmit)="submitModificarForm()">
        <div>
            <label for="modificarNombre">Nombre:</label>
            <input id="modificarNombre" formControlName="username" type="text" />
        </div>

        <div>
            <label for="modificarMail">mail:</label>
            <input id="modificarMail" formControlName="mail" type="email" />
        </div>

        <div>
            <label for="modificarClave">password:</label>
            <input id="modificarClave" formControlName="password" type="password" />
        </div>

        <button type="submit" [disabled]="modificarUsuarioForm.invalid">Guardar Cambios</button>
    </form>

</div>